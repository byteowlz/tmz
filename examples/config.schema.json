{
  "$id": "https://github.com/byteowlz/tmz/schemas/config.schema.json",
  "$schema": "http://json-schema.org/draft-07/schema#",
  "title": "tmz configuration",
  "description": "Configuration schema for tmz",
  "type": "object",
  "properties": {
    "$schema": {
      "description": "JSON Schema reference for editor support",
      "type": "string"
    },
    "logging": {
      "description": "Logging configuration.",
      "allOf": [
        {
          "$ref": "#/definitions/LoggingConfig"
        }
      ],
      "default": {
        "level": "info"
      }
    },
    "paths": {
      "description": "Custom paths for data and state directories.",
      "allOf": [
        {
          "$ref": "#/definitions/PathsConfig"
        }
      ],
      "default": {}
    },
    "people": {
      "description": "People/chat aliases. Map short names to display names or conversation IDs.",
      "type": "object",
      "additionalProperties": {
        "type": "string"
      }
    },
    "profile": {
      "description": "Active configuration profile.",
      "type": "string",
      "default": "default"
    },
    "runtime": {
      "description": "Runtime behavior configuration.",
      "allOf": [
        {
          "$ref": "#/definitions/RuntimeConfig"
        }
      ],
      "default": {
        "fail_fast": true,
        "timeout": 60
      }
    }
  },
  "definitions": {
    "LogLevel": {
      "description": "Log level enumeration for schema validation.",
      "oneOf": [
        {
          "description": "Only emit error-level messages.",
          "type": "string",
          "const": "error"
        },
        {
          "description": "Emit warnings and errors.",
          "type": "string",
          "const": "warn"
        },
        {
          "description": "Emit informational messages and above (default).",
          "type": "string",
          "const": "info"
        },
        {
          "description": "Emit debug diagnostics and above.",
          "type": "string",
          "const": "debug"
        },
        {
          "description": "Emit all messages including fine-grained traces.",
          "type": "string",
          "const": "trace"
        }
      ]
    },
    "LoggingConfig": {
      "description": "Logging configuration",
      "type": "object",
      "properties": {
        "file": {
          "description": "Optional path for log file output. Supports ~ and environment variables.",
          "type": [
            "string",
            "null"
          ]
        },
        "level": {
          "description": "Log level (error, warn, info, debug, trace).",
          "allOf": [
            {
              "$ref": "#/definitions/LogLevel"
            }
          ],
          "default": "info"
        }
      }
    },
    "PathsConfig": {
      "description": "Custom paths for data and state directories",
      "type": "object",
      "properties": {
        "data_dir": {
          "description": "Directory for persistent data. Supports ~ and environment variables.",
          "type": [
            "string",
            "null"
          ]
        },
        "state_dir": {
          "description": "Directory for state files. Supports ~ and environment variables.",
          "type": [
            "string",
            "null"
          ]
        }
      }
    },
    "RuntimeConfig": {
      "description": "Runtime behavior configuration",
      "type": "object",
      "properties": {
        "fail_fast": {
          "description": "Stop on first error.",
          "type": "boolean",
          "default": true
        },
        "parallelism": {
          "description": "Worker pool size. Defaults to logical CPU count when unset.",
          "type": [
            "integer",
            "null"
          ],
          "format": "uint",
          "minimum": 1
        },
        "timeout": {
          "description": "Timeout in seconds for long-running operations (default: 60).",
          "type": [
            "integer",
            "null"
          ],
          "format": "uint64",
          "default": 60,
          "minimum": 1
        }
      }
    }
  }
}